import{c as b}from"./index.C1Qlw3jS.js";import{openChat as E}from"./supabase.DCKg3lBM.js";const l=b("https://vgdmfnigbbdjvbtphnxh.supabase.co","sb_publishable_qNW9fKrKANJgEAL5KkhgLw_MKm7KvUv"),g=document.querySelectorAll(".tab-btn"),h=document.querySelectorAll(".tab-content");g.forEach(e=>{e.addEventListener("click",()=>{g.forEach(r=>{r.classList.remove("border-black","dark:border-white","text-black","dark:text-white"),r.classList.add("border-transparent","text-neutral-500")}),e.classList.remove("border-transparent","text-neutral-500"),e.classList.add("border-black","dark:border-white","text-black","dark:text-white"),h.forEach(r=>r.classList.add("hidden"));const t=e.getAttribute("data-target");t&&document.getElementById(t)?.classList.remove("hidden")})});document.querySelectorAll(".image-slider").forEach(e=>{const t=e.querySelector(".slider-track"),r=e.querySelector(".slider-prev"),d=e.querySelector(".slider-next"),c=e.querySelectorAll(".slider-dots button"),u=JSON.parse(e.getAttribute("data-images")||"[]");let s=0;function i(){t&&(t.style.transform=`translateX(-${s*100}%)`),c.forEach((n,a)=>{n.classList.toggle("bg-black",a===s),n.classList.toggle("dark:bg-white",a===s),n.classList.toggle("bg-neutral-300",a!==s),n.classList.toggle("dark:bg-neutral-600",a!==s)})}r&&r.addEventListener("click",()=>{s=s>0?s-1:u.length-1,i()}),d&&d.addEventListener("click",()=>{s=s<u.length-1?s+1:0,i()}),c.forEach((n,a)=>{n.addEventListener("click",()=>{s=a,i()})})});const m=document.getElementById("avatar-upload");m&&m.addEventListener("change",async e=>{const t=e.target;if(!t.files||t.files.length===0)return;const r=t.files[0],{data:d}=await l.auth.getSession(),c=d.session?.user;if(!c){alert("You must be logged in to upload.");return}const u=r.name.split(".").pop(),s=`${c.id}.${u}`,{error:i}=await l.storage.from("avatars").upload(s,r,{upsert:!0});if(i){console.error("Upload error:",i),alert("Error uploading image.");return}const{data:n}=l.storage.from("avatars").getPublicUrl(s),{error:a}=await l.from("profiles").update({avatar_url:n.publicUrl}).eq("id",c.id);a?(console.error("Profile update error:",a),alert("Error updating profile.")):window.location.reload()});const o=document.getElementById("service-modal"),f=document.getElementById("add-service-btn"),v=document.getElementById("close-svc-modal"),p=document.getElementById("service-form");f&&o&&v&&(f.addEventListener("click",()=>o.classList.remove("hidden")),v.addEventListener("click",()=>o.classList.add("hidden")),o.addEventListener("click",e=>{e.target===o&&o.classList.add("hidden")}));p&&p.addEventListener("submit",async e=>{e.preventDefault();const{data:t}=await l.auth.getSession();if(!t.session)return;const{error:r}=await l.from("services").insert({title:document.getElementById("svc-title").value,price:document.getElementById("svc-price").value,description:document.getElementById("svc-desc").value,user_id:t.session.user.id});r?alert(r.message):(o?.classList.add("hidden"),window.location.reload())});const L=["message-btn","message-btn-large"];L.forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("click",()=>{const r=JSON.parse(t.getAttribute("data-target-user-id")||"null");r&&E(r)})});
