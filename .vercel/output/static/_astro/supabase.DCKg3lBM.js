import{c as a}from"./index.C1Qlw3jS.js";const c=a("https://vgdmfnigbbdjvbtphnxh.supabase.co","sb_publishable_qNW9fKrKANJgEAL5KkhgLw_MKm7KvUv");async function l(n){try{console.log("Opening chat with user ID:",n);const{data:o}=await c.auth.getSession();if(!o.session){alert("You must be logged in to open a chat.");return}const s=o.session.user.id;console.log("Current user ID:",s);const e=await fetch("/api/create-conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_user_id:n})});if(!e.ok){const r=await e.text();console.error("Chat Error:",r),alert("Could not open chat: "+r);return}const{conversation_id:t}=await e.json();console.log("Got conversation ID:",t),console.log("Redirecting to conversation:",t),window.location.href=`/inbox/${t}`}catch(o){console.error("Unexpected error:",o),alert(`An unexpected error occurred: ${o}`)}}export{l as openChat,c as supabase};
